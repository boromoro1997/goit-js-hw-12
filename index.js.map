{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst myKey = '50870264-4cff09f0574465c81a14bcda1';\nconst baseUrl = 'https://pixabay.com/api/';\n// export function ygetImagesByQuer(query) {\n//   const params = {\n//     key: myKey,\n//     q: query,\n//     image_type: 'photo',\n//     orientation: 'horizontal',\n//     safesearch: true,\n//     lang: 'en',\n//   };\n\n//   return axios(baseUrl, { params }).then(({ data }) => {\n//     return data.hits;\n//   });\n// }\n// let page = 1;\nexport async function getImagesByQuery(query, page = 1) {\n  const params = {\n    key: myKey,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    lang: 'en',\n    per_page: 15,\n    page,\n  };\n  const { data } = await axios(baseUrl, { params });\n  const maxPages = Math.ceil(data.totalHits / params.per_page);\n  return {\n    maxPages,\n    images: data.hits,\n  };\n}\n// getImagesByQuery('cat', page)\n//   .then(({ maxPages, images }) => {\n//     console.log(images);\n//     console.log(maxPages);\n//   })\n//   .catch(er => {\n//     console.log(er);\n//   });\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst loader = document.querySelector('.loader');\nexport const button = document.querySelector('.btn');\nexport function showLoader() {\n  loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\nexport function showLoadMoreButton() {\n  button.classList.remove('hidden');\n}\nexport function hideLoadMoreButton() {\n  button.classList.add('hidden');\n}\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\nexport function createGallery(images) {\n  const markUp = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n  <ul>\n  <li><span class=\"spanText\">Likes</span><br>${likes}</li>\n  <li><span class=\"spanText\">Views</span><br>${views}</li>\n  <li><span class=\"spanText\">Comments</span><br>${comments}</li>\n  <li><span class=\"spanText\">Downloads</span><br>${downloads}</li>\n  </ul>\n</li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markUp);\n  lightbox.refresh();\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  button,\n} from './js/render-functions';\nlet page = 1;\nconst form = document.querySelector('.form');\nform.addEventListener('submit', searchSubmit);\nlet searchedWord;\nfunction searchSubmit(e) {\n  e.preventDefault();\n  showLoader();\n  clearGallery();\n  searchedWord = form.elements['search-text'].value.trim();\n  if (searchedWord.trim() === '') {\n    form.reset();\n    hideLoader();\n    return iziToast.show({\n      message: '❌ you must write something!!',\n      backgroundColor: 'red',\n      position: 'topRight',\n    });\n  }\n  getImagesByQuery(searchedWord, page)\n    .then(({ maxPages, images }) => {\n      if (images.length === 0) {\n        return iziToast.show({\n          message:\n            '❌ Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: 'red',\n          position: 'topRight',\n        });\n      }\n      createGallery(images);\n      if (page <= maxPages) {\n        showLoadMoreButton();\n      }\n    })\n    .catch(er =>\n      iziToast.show({\n        message: `Server error : ${er}`,\n      })\n    )\n    .finally(() => {\n      hideLoader();\n      form.reset();\n      page = 1;\n    });\n}\nbutton.addEventListener('click', handleClick);\nasync function handleClick() {\n  page++;\n  hideLoadMoreButton();\n  showLoader();\n  try {\n    const { images, maxPages } = await getImagesByQuery(searchedWord, page);\n    createGallery(images);\n    const card = document.querySelector('.gallery-item');\n    const { height } = card.getBoundingClientRect();\n    if (page < maxPages) {\n      showLoadMoreButton();\n    }\n    if (page >= maxPages) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: 'blue',\n        position: 'topRight',\n      });\n    }\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  } catch (er) {\n    iziToast.show({\n      message: `Server error : ${er.message}`,\n    });\n  }\n  hideLoader();\n}\n"],"names":["myKey","baseUrl","getImagesByQuery","query","page","params","data","axios","loader","button","showLoader","hideLoader","clearGallery","gallery","showLoadMoreButton","hideLoadMoreButton","lightbox","SimpleLightbox","createGallery","images","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","searchSubmit","searchedWord","e","iziToast","maxPages","er","handleClick","card","height"],"mappings":"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"}